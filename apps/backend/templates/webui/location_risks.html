{% extends "webui/base.html" %}
{% load i18n %}
{% block content %}
<div class="card">
  <h1>{% trans "Location Risks" %}</h1>
  <form method="get"
        hx-get="{% url 'webui:location-risks' %}"
        hx-target="#location-risk-content"
        hx-trigger="change, submit"
        hx-indicator="#location-risk-loading">
    <div class="inline-grid">
      <div>
        <label>{% trans "Business Unit" %}</label>
        <select name="business_unit_code">
          <option value="">{% trans "All" %}</option>
          {% for bu in business_units %}
            <option value="{{ bu.code }}" {% if selected_business_unit_code == bu.code %}selected{% endif %}>{{ bu.code }} - {{ bu.name }}</option>
          {% endfor %}
        </select>
      </div>
      <div>
        <label>{% trans "Cost Center" %}</label>
        <select name="cost_center_code">
          <option value="">{% trans "All" %}</option>
          {% for cc in cost_centers %}
            <option value="{{ cc.code }}" {% if selected_cost_center_code == cc.code %}selected{% endif %}>{{ cc.code }} - {{ cc.name }}</option>
          {% endfor %}
        </select>
      </div>
      <div>
        <label>{% trans "Section" %}</label>
        <select name="section_code">
          <option value="">{% trans "All" %}</option>
          {% for sec in sections %}
            <option value="{{ sec.code }}" {% if selected_section_code == sec.code %}selected{% endif %}>{{ sec.code }} - {{ sec.name }}</option>
          {% endfor %}
        </select>
      </div>
    </div>
    <div class="inline-grid">
      <div>
        <label>{% trans "Asset Type" %}</label>
        <select name="asset_type_code">
          <option value="">{% trans "All" %}</option>
          {% for asset_type in asset_types %}
            <option value="{{ asset_type.code }}" {% if selected_asset_type_code == asset_type.code %}selected{% endif %}>{{ asset_type.code }} - {{ asset_type.name }}</option>
          {% endfor %}
        </select>
      </div>
      <div>
        <label>{% trans "Status" %}</label>
        <select name="status">
          <option value="">{% trans "All" %}</option>
          {% for value, label in risk_status_choices %}
            <option value="{{ value }}" {% if selected_status == value %}selected{% endif %}>{{ label }}</option>
          {% endfor %}
        </select>
      </div>
      <div>
        <label>{% trans "Owner" %}</label>
        <input type="text" name="owner" value="{{ selected_owner }}" />
      </div>
    </div>
    <div class="inline-grid">
      <div>
        <label>{% trans "Due Date From" %}</label>
        <input type="date" name="due_date_from" value="{{ due_date_from }}" />
      </div>
      <div>
        <label>{% trans "Due Date To" %}</label>
        <input type="date" name="due_date_to" value="{{ due_date_to }}" />
      </div>
      <div></div>
    </div>
    <div class="actions">
      <button type="submit">{% trans "Apply Filter" %}</button>
      <span id="location-risk-loading" class="muted htmx-indicator">{% trans "Loading..." %}</span>
    </div>
  </form>
</div>

<div id="location-risk-content">
  {% include "webui/partials/location_risks_content.html" %}
</div>
{% endblock %}
